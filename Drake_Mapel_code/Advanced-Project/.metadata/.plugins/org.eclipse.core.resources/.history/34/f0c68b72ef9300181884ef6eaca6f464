package com.advanced;

import java.io.IOException;
import java.util.Scanner;

import com.advanced.dao.PizzaDao;
import com.advanced.drake.Pizza;
import com.advanced.presentation.UserMenuDisplay;

public class PizzaTime {
	
	public static void main(String[] args) {
		
		Scanner scan = new Scanner(System.in);
		
		UserMenuDisplay.welcome();
		int userInput = 0;
		
		while (true) {
			userInput = scan.nextInt();
			
			switch (userInput) {
			case 1:
				promptForToppings();
				break;
			case 2:
				getPizzaOrder();
				break;
			case 3:
				System.out.println("Have a nice day!");
				scan.close();
				System.exit(1);
			}
		}
		
	}
	
	public static void promptForToppings() {

		Pizza pizza = UserMenuDisplay.addToppings();
		
		// Persist pizza to order file
		try {
			PizzaDao.serializePizza(pizza);
		} catch (IOException e) {
			System.out.println("Order malfunction");
		}
		
	}
	
	public static void getPizzaOrder() {
		
		// retrieve pizza via PizzaDao
		Pizza pizza = null;
		try {
			pizza = PizzaDao.deserializePizza();
		} catch (ClassNotFoundException e) {
			System.out.println("Choice not found");
		} catch (IOException e) {
			System.out.println("Order malfunction");
		}
		
		UserMenuDisplay.currentOrder(pizza);
		
	}

}
